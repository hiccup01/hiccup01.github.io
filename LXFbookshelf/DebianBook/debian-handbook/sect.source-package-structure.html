<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>5.3. Structure of a Source Package</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta name="generator" content="publican 3.0" /><meta name="package" content="Debian-debian-handbook-6.0-en-US-1.0-1" /><meta name="keywords" content="Binary package, Source package, dpkg, dependencies, conflict" /><link rel="home" href="index.html" title="The Debian Administrator's Handbook" /><link rel="up" href="packaging-system.html" title="Chapter 5. Packaging System: Tools and Fundamental Principles" /><link rel="prev" href="sect.package-meta-information.html" title="5.2. Package Meta-Information" /><link rel="next" href="sect.manipulating-packages-with-dpkg.html" title="5.4. Manipulating Packages with dpkg" /></head><body><p class="hidden" id="title"><a class="left" href="http://www.debian.org"><img src="Common_Content/images/image_left.png" alt="Product Site" /></a><a class="right" href="http://debian-handbook.info"><img src="Common_Content/images/image_right.png" alt="Documentation Site" /></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="sect.package-meta-information.html"><strong>Prev</strong></a></li><li class="home">The Debian Administrator's Handbook</li><li class="next"><a accesskey="n" href="sect.manipulating-packages-with-dpkg.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title" id="sect.source-package-structure">5.3. Structure of a Source Package</h2></div></div></div><a id="idp12677752" class="indexterm"></a><a id="idp12678456" class="indexterm"></a><div class="section"><div class="titlepage"><div><div><h3 class="title" id="idp12678920">5.3.1. Format</h3></div></div></div><a id="idp12679320" class="indexterm"></a><a id="idp12679800" class="indexterm"></a><div class="para"><p></p>
				A source package is usually comprised of three files, a <code class="filename">.dsc</code>, a <code class="filename">.orig.tar.gz</code>, and a <code class="filename">.debian.tar.gz</code> or <code class="filename">.diff.gz</code>. They allow creation of binary packages (<code class="filename">.deb</code> files described above) for the program(s) from their source code, written in a programming language.
			</div><div class="para"><p></p>
				The <code class="filename">.dsc</code> (Debian Source Control) file is a short text file containing an RFC 2822 header (just like the <code class="filename">control</code> file studied in <a class="xref" href="sect.package-meta-information.html#section.control">Section 5.2.1, “Description: the <code class="filename">control</code> File”</a>) which describes the source package and indicates which other files are part thereof. It is signed by its maintainer, which guarantees authenticity. See <a class="xref" href="sect.package-authentication.html">Section 6.5, “Checking Package Authenticity”</a> for further details on this subject.
			</div><div class="example"><h6>Example 5.1. A <code class="filename">.dsc</code> file</h6><div class="example-contents"><pre class="programlisting">
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

Format: 3.0 (quilt)
Source: zim
Binary: zim
Architecture: all
Version: 0.48-1
Maintainer: Emfox Zhou &lt;emfox@debian.org&gt;
Uploaders: Raphaël Hertzog &lt;hertzog@debian.org&gt;
Homepage: http://zim-wiki.org
Standards-Version: 3.9.0
Vcs-Browser: http://svn.debian.org/wsvn/collab-maint/deb-maint/zim/trunk?op=log
Vcs-Svn: svn://svn.debian.org/collab-maint/deb-maint/zim/trunk
Build-Depends: debhelper (&gt;= 7.4.12), python-support (&gt;= 0.8), xdg-utils, python (&gt;= 2.5), libgtk2.0-0 (&gt;= 2.6), python-gtk2, python-xdg, python-simplejson | python (&gt;= 2.6)
Checksums-Sha1: 
 bd84fa5104de5ed85a49723d26b350856de93217 966899 zim_0.48.orig.tar.gz
 352111ff372a20579664416c9abd4970839835b3 9615 zim_0.48-1.debian.tar.gz
Checksums-Sha256: 
 77d8df7dc89b233fdc3aab1a8ad959c6888881ae160770f50bf880a56e02f895 966899 zim_0.48.orig.tar.gz
 0fceab5d3b099075cd38c225fa4002d893c1cdf4bbcc51d1391a34248e1e1a22 9615 zim_0.48-1.debian.tar.gz
Files: 
 88cfc18c0c7339528d5f5f463647bb5f 966899 zim_0.48.orig.tar.gz
 608b6e74aa14252dfc6236ab184bdb0c 9615 zim_0.48-1.debian.tar.gz

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)
Comment: Signed by Raphael Hertzog

iQEcBAEBCAAGBQJMSUAfAAoJEAOIHavrwpq5qjUIAKmM8p86GcHYTxMmKENoBUoW
UPi5R7DzrLMbFrUXKgXWLvEKQTXpmkJhh2aSWq2iY+5piBSHwMiITfaBTpdTRvzU
5nT/n9MlF8sJFESet/NgZaMPFDzWUbIy5aYbuG1TXmn/7XiDrBaQGiVqKkVLPrqc
yWhsotn3JNKIjbPDW/DjImYyKD5RZpXrbVjuIgDT1E6yxtNYwUyBlK0cx/GITNep
uV48hsT8cj0paqVXl5+P9Ww8XIE3clxNpE/45/tvKvkqGOeysc6OPAqsIw6HYFY9
0EnvMTfMpeQOA68ZqsNpUjomv5r/EGwdCbAWo5iJDsZzXQ1Feh6iSNrjv3yeRzg=
=qnbh
-----END PGP SIGNATURE-----
</pre></div></div><br class="example-break" /><a id="idp12686096" class="indexterm"></a><div class="para"><p></p>
				Note that the source package also has dependencies (<code class="literal">Build-Depends</code>) completely distinct from those of binary packages, since they indicate tools required to compile the software in question and construct its binary package.
			</div><div class="sidebar fil"><div class="titlepage"><div><div><h6><span class="emphasis"><em>CAUTION</em></span> Distinct namespaces</h6></div></div></div><div class="para"><p></p>
				It is important to note here that there is no strong correspondence between the name of the source package and that of the binary packages that they generate. It is easy enough to understand if you know that each source package may generate several binary packages. This is why the <code class="filename">.dsc</code> file has fields for <code class="literal">Source</code> and <code class="literal">Binary</code> to explicitly name the source package and store the list of binary packages that it generates.
			</div></div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>CULTURE</em></span> Why divide into several packages</h6></div></div></div><div class="para"><p></p>
				Quite frequently, a source package (for a certain group of programs) can generate several binary packages. The reasons are multiple: a program may often be used in different contexts, so a shared library may be installed to make an application work (for example, <span class="pkg pkg">libc6</span>), or when it can be installed to develop a new program (<span class="pkg pkg">libc6-dev</span> will then be the correct package). We find the same logic for client/server services where we want to install the server part on one machine and the client part on others (this is the case, for example, of <span class="pkg pkg">openssh-server</span> and <span class="pkg pkg">openssh-client</span>).
			</div><div class="para"><p></p>
				Just as frequently, the documentation is provided in a dedicated package: the user may install it independently from the software, and may at any time choose to remove it to save disk space. Additionally, this also saves disk space on the Debian mirrors, since the documentation package will be shared amongst all of the architectures (instead of having the documentation duplicated in the packages for each architecture).
			</div></div><div class="sidebar"><div class="titlepage"><div><div><h6><span class="emphasis"><em>PERSPECTIVE</em></span> Different source package formats</h6></div></div></div><div class="para"><p></p>
				Originally there was only one source package format. This is the <code class="literal">1.0</code> format, which associates an <code class="filename">.orig.tar.gz</code> archive to a <code class="filename">.diff.gz</code> “debianization” patch (there is also a variant, consisting of a single <code class="filename">.tar.gz</code> archive, which is automatically used if no <code class="filename">.orig.tar.gz</code> is available).
			</div><div class="para"><p></p>
				Since Debian <span class="distribution distribution">Squeeze</span>, Debian developers have the option to use new formats that correct many problems of the historical format. Format <code class="literal">3.0 (quilt)</code> can combine multiple upstream archives in the same source package: in addition to the usual <code class="filename">.orig.tar.gz</code>, supplementary <code class="filename">.orig-<em class="replaceable"><code>component</code></em>.tar.gz</code> archives. This is useful with software that are distributed in several upstream components but for which a single source package is desired. These archives can also be compressed with <code class="command">bzip2</code> rather than <code class="command">gzip</code> (<code class="command">lzma</code> and <code class="command">xz</code> are supported by <code class="command">dpkg-source</code> but not accepted into the official archive), which saves disk space and network resources. Finally, the monolithic patch, <code class="filename">.diff.gz</code> is replaced by a <code class="filename">.debian.tar.gz</code> archive containing the compiling instructions and a set of upstream patches contributed by the package maintainer. These last are recorded in a format compatible with <code class="command">quilt</code>, a tool that facilitates the management of a series of patches.
			</div></div><div class="para"><p></p>
				The <code class="filename">.orig.tar.gz</code> is an archive containing the program source code as provided by the original developer. Developers are asked to not modify this archive in order to be able to easily check the source and integrity of the file (by simple comparison with a checksum) and to respect the wishes of some authors.
			</div><div class="para"><p></p>
				The <code class="filename">.debian.tar.gz</code> contains all of the modifications made by the Debian maintainer, especially the addition of a <code class="filename">debian</code> directory containing instructions to execute to construct a Debian package.
			</div><div class="sidebar fil"><div class="titlepage"><div><div><h6><span class="emphasis"><em>TOOL</em></span> Decompressing a source package</h6></div></div></div><a id="idp12701752" class="indexterm"></a><div class="para"><p></p>
				If you have a source package, you can use the <code class="command">dpkg-source</code> (from the <span class="emphasis"><em>dpkg-dev</em></span> package) to decompress it:
			</div><pre class="screen"><code class="computeroutput">$ </code><strong class="userinput"><code>dpkg-source -x package_0.7-1.dsc</code></strong></pre><div class="para"><p></p>
				You can also use <code class="command">apt-get</code> to download a source package and unpack it right away. It requires that the appropriate <span class="emphasis"><em>deb-src</em></span> lines be present in the <code class="filename">/etc/apt/sources.list</code> file, however (for further details, see <a class="xref" href="apt.html#sect.apt-sources.list">Section 6.1, “Filling in the <code class="filename">sources.list</code> File”</a>). These are used to list the “sources” of source packages (meaning the servers on which a group of source packages are hosted).
			</div><pre class="screen"><code class="computeroutput">$ </code><strong class="userinput"><code>apt-get source <em class="replaceable"><code>package</code></em></code></strong></pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title" id="idp12705800">5.3.2. Usage within Debian</h3></div></div></div><div class="para"><p></p>
				The source package is the foundation of everything in Debian. All Debian packages come from a source package, and each modification in a Debian package is the consequence of a modification made to the source package. The Debian maintainers work with the source package, knowing, however, the consequences of their actions on the binary packages. The fruits of their labors are found, thus, in the source packages available from Debian: you can easily go back and follow everything.
			</div><div class="para"><p></p>
				When a new version of a package (source package and one or more binary packages) arrives on the Debian server, the source package is the most important. Indeed, it will then be used by a network of machines of different architectures for compilation of the various architectures supported by Debian. The fact that the developer also sends one or more binary packages for a given architecture (usually i386 or amd64) is relatively unimportant, since these could just as well have been automatically generated.
			</div></div></div><div id="site_footer"></div><script type="text/javascript">
		$("#site_footer").load("../../../../../footer.html");
	</script><ul class="docnav"><li class="previous"><a accesskey="p" href="sect.package-meta-information.html"><strong>Prev</strong>5.2. Package Meta-Information</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="sect.manipulating-packages-with-dpkg.html"><strong>Next</strong>5.4. Manipulating Packages with dpkg</a></li></ul></body></html>
